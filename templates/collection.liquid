{%- assign headerSnippetPath = 'header-index' -%}
{%- assign wfPage = '687e7b1fe546230171c3f7a6' -%}
{%- assign bodyClasses = '' -%}
<div class="page-wrapper home">
	{%- render 'global-styles' -%}
	{%- render 'navbar' -%}
	<main class="main-wrapper">
		<div class="spacer-xlarge">
		{% render 'grid-produtos' %}
		{% render 'section-formula' %}
		{% render 'section-quem' %}
	</main>
	{%- render 'footer' -%}
</div>
<script
	src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=687b9decde4053855982b5b1"
	type="text/javascript"
	integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
	crossorigin="anonymous"
	defer></script>
<script
	src="{{ 'webflow.js' | asset_url }}"
	type="text/javascript"
	defer></script>

<style>
	.button-group {
		display: flex;
		gap: 10px;
		flex-wrap: wrap;
	}

	.sidebar-cart-trigger {
		background-color: #333 !important;
		color: #fff !important;
	}

	.sidebar-cart-trigger:hover {
		background-color: #555 !important;
	}

	/* Desktop grid positioning */
	@media screen and (min-width: 992px) {
		.layout195_content-right {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 20px;
		}

		.heading-shop {
			grid-area: 1 / 1 / 2 / 3;
		}

		.text-quantity-description {
			grid-area: 2 / 1 / 3 / 3;
		}

		.text-rich-text-shop {
			grid-area: 3 / 1 / 4 / 3;
		}

		.price-wrapper {
			grid-area: 4 / 1 / 5 / 2;
		}

		.button-group-shop {
			grid-area: 4 / 2 / 5 / 3;
			justify-self: end;
		}
	}

	/* Mobile grid positioning */
	@media screen and (max-width: 991px) {
		.layout195_content-right {
			grid-area: 1 / 1 / 2 / 3;
		}

		.heading-shop {
			grid-area: 1 / 1 / 2 / 3;
		}

		.text-quantity-description {
			grid-area: 2 / 1 / 3 / 3;
		}

		.price-wrapper {
			grid-area: 3 / 1 / 4 / 3;
		}

		.text-rich-text-shop {
			grid-area: 4 / 1 / 5 / 3;
		}

		.button-group-shop {
			grid-area: 5 / 1 / 6 / 3;
		}
	}
</style>

<script>
	// Function to add product to cart and open sidebar
	function addToCartAndOpenSidebar(productId, quantity = 1) {
		// Show loading state
		const button = event.target;
		const originalText = button.textContent;
		button.textContent = 'Adicionando...';
		button.disabled = true;

		const formData = new FormData();
		formData.append('id', productId);
		formData.append('quantity', quantity);

		fetch('/cart/add.js', {
			method: 'POST',
			body: formData,
		})
			.then(response => response.json())
			.then(data => {
				if (data.status) {
					// Error occurred
					alert('Error adding product to cart: ' + data.description);
				} else {
					// Success - update cart count and open sidebar
					updateCartCount();
					if (typeof window.openSidebarCart === 'function') {
						window.openSidebarCart();
					}
				}
			})
			.catch(error => {
				console.error('Error:', error);
				alert('Error adding product to cart');
			})
			.finally(() => {
				// Reset button state
				button.textContent = originalText;
				button.disabled = false;
			});
	}

	// Function to update cart count and sidebar
	function updateCartCount() {
		fetch('/cart.js')
			.then(response => response.json())
			.then(cart => {
				console.log('Cart updated:', cart);

				const cartCountElements = document.querySelectorAll('.cart-quantity-text');
				cartCountElements.forEach(element => {
					element.textContent = cart.item_count;
				});

				// Update sidebar cart if it exists with a small delay to ensure DOM is ready
				if (typeof window.updateCartDisplay === 'function') {
					setTimeout(() => {
						window.updateCartDisplay(cart);
					}, 100);
				}
			})
			.catch(error => {
				console.error('Error updating cart count:', error);
			});
	}
</script>
