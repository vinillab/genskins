{%- assign headerSnippetPath = 'header-index' -%}
{%- assign wfPage = '693042c68e219ef07dd3ce54' -%}
{%- assign bodyClasses = '' -%}
<div class="page-wrapper home">
	{%- render 'global-styles' -%}
	{%- render 'navbar' -%}
	{%- render 'sidebar-cart' -%}

	<main class="main-wrapper">
		<header class="section_product-header7">
			<div class="padding-global">
				<div class="container-large">
					<div class="padding-section-large interna-produto">
						<div class="w-layout-grid product-header7_component">
							<div class="product-header7_gallery-slider">
								<div
									data-delay="4000"
									data-animation="cross"
									class="product-header7_slider w-slider"
									data-autoplay="false"
									data-easing="ease"
									data-hide-arrows="false"
									data-disable-swipe="false"
									data-w-id="a8878137-0271-8d6d-4fb7-ce8aef984ce5"
									data-autoplay-limit="0"
									data-nav-spacing="3"
									data-duration="500"
									data-infinite="true">
									<div class="w-slider-mask">
										{%- for image in product.images -%}
											<div class="product-header7_slide w-slide">
												<a
													href="{{ image | img_url: 'master' }}"
													class="product-header7_lightbox-link w-inline-block w-lightbox">
													<div class="product-header7_image-wrapper">
														<img
															loading="lazy"
															src="{{ image | img_url: '800x' }}"
															alt="{{ image.alt | default: product.title }}"
															width="800"
															height="800"
															class="product-header7_main-image">
													</div>
													<script
														type="application/json"
														class="w-json">
														{ "items": [{ "type": "image", "url": "{{ image | img_url: 'master' }}", "caption": "{{ image.alt | default: product.title }}" }], "group": "product-gallery" }
													</script>
												</a>
											</div>
										{%- endfor -%}
									</div>
									<div
										style="opacity:0"
										class="product-header7_arrow-left w-slider-arrow-left">
										<div class="product-header7_arrow-icon w-embed">
											<svg
												width="100%"
												height="100%"
												viewBox="0 0 16 16"
												fill="none"
												xmlns="http://www.w3.org/2000/svg">
												<path d="M3.31066 8.75001L9.03033 14.4697L7.96967 15.5303L0.439339 8.00001L7.96967 0.469676L9.03033 1.53034L3.31066 7.25001L15.5 7.25L15.5 8.75L3.31066 8.75001Z" fill="currentColor"></path>
											</svg>
										</div>
									</div>
									<div
										style="opacity:0"
										class="product-header7_arrow w-slider-arrow-right">
										<div class="product-header7_arrow-icon w-embed">
											<svg
												width="100%"
												height="100%"
												viewBox="0 0 16 16"
												fill="none"
												xmlns="http://www.w3.org/2000/svg">
												<path d="M12.6893 7.25L6.96967 1.53033L8.03033 0.469666L15.5607 8L8.03033 15.5303L6.96967 14.4697L12.6893 8.75H0.5V7.25H12.6893Z" fill="currentColor"></path>
											</svg>
										</div>
									</div>
									<div class="product-header7_slide-nav w-slider-nav w-slider-nav-invert w-round"></div>
								</div>
							</div>
							<div
								id="w-node-_95a46cc3-dfca-3e88-b2bf-462ae0f7db21-7dd3ce54"
								class="product-header7_product-details">
								<h1 class="product-title">{{ product.title }}</h1>
								<div class="spacer-xxsmall"></div>
								<p class="produt-sub-title">23 adesivos secativos para acne</p>
								<div class="spacer-small"></div>
								<div class="product-header7_price-wrapper">
									{%- if product.compare_at_price > product.price -%}
										<div class="heading-style-h5">
											<span class="compare-price">{{ product.compare_at_price | money }}</span>
											<span class="current-price">{{ product.price | money }}</span>
										</div>
									{%- else -%}
										<div class="heading-style-h5">{{ product.price | money }}</div>
									{%- endif -%}
									{%- if cart.taxes_included -%}
										<div class="text-size-tiny">Taxes included</div>
									{%- endif -%}
								</div>
								<div class="spacer-medium"></div>
								<div class="product-header7_product-info">
									{{ product.description }}
								</div>
								<p class="titulo-cores">Cores da cartela</p>
								<div class="spacer-medium"></div>
								<div class="product-colors-wrapper">
									<div class="product-colors-item cor-1"></div>
									<div class="product-colors-item cor-2"></div>
									<div class="product-colors-item cor-3"></div>
								</div>
								<div class="spacer-large"></div>
								<div class="product-header7_add-to-cart w-form">
									{%- form 'product', product, class: 'product-header7_default-state', data-node-type: 'commerce-add-to-cart-form' -%}
										{%- render 'product-variants-data' -%}

										{%- unless product.has_only_default_variant -%}
											{%- for option in product.options_with_values -%}
												<div class="product-header7_option">
													<div class="form_field-label">{{ option.name }}</div>
													<select
														class="form_input w-select"
														name="options[{{ option.name | escape }}]"
														id="Option{{ forloop.index }}">
														{%- for value in option.values -%}
															<option
																value="{{ value | escape }}"
																{% if option.selected_value == value %}
																	selected="selected"
																{% endif %}>
																{{ value }}
															</option>
														{%- endfor -%}
													</select>
												</div>
											{%- endfor -%}
										{%- endunless -%}

										<div class="product-header7_option">
											<div class="form_field-label">Quantidade</div>
											<input
												class="form_input is-quantity-input w-input"
												maxlength="256"
												name="quantity"
												data-name="Quantity"
												placeholder="1"
												type="number"
												value="1"
												min="1"
												id="Quantity">
										</div>

										<div class="button-group">
											{%- if product.available -%}
												<button
													type="button"
													class="button"
													onclick="addToCartAndOpenSidebar()">
													SHOP
												</button>
											{%- else -%}
												<button
													type="button"
													class="button"
													disabled>
													Sold out
												</button>
											{%- endif -%}
										</div>

										<div
											class="w-commerce-commerceaddtocartoutofstock"
											style="display: none;">
											<div>Produto indisponível no momento.</div>
										</div>
										<div
											data-node-type="commerce-add-to-cart-error"
											style="display: none;">
											<div class="w-form-fail">
												<div>Preencha todos os campos obrigatórios.</div>
											</div>
										</div>
									{%- endform -%}
								</div>
							</div>
						</div>
						{%- assign accordion_items = product.metafields.accordion.items.value -%}
						{%- if accordion_items != blank and accordion_items.size > 0 -%}
							<div class="w-layout-grid faq5_list">
								{%- for item in accordion_items -%}
									<div class="product_info_accordion">
										<div
											data-w-id="95a46cc3-dfca-3e88-b2bf-462ae0f7db47"
											class="faq5_question">
											<div class="product_accordeon_headiing">{{ item.title }}</div>
											<div class="faq5_icon-wrapper">
												<div class="icon-embed-small w-embed">
													<svg
														width="100%"
														height="100%"
														viewbox="0 0 32 32"
														fill="none"
														xmlns="http://www.w3.org/2000/svg">
														<path
															d="M25.3333 15.667V16.3336C25.3333 16.7018 25.0349 17.0003 24.6667 17.0003H17V24.667C17 25.0351 16.7015 25.3336 16.3333 25.3336H15.6667C15.2985 25.3336 15 25.0351 15 24.667V17.0003H7.3333C6.96511 17.0003 6.66663 16.7018 6.66663 16.3336V15.667C6.66663 15.2988 6.96511 15.0003 7.3333 15.0003H15V7.33365C15 6.96546 15.2985 6.66699 15.6667 6.66699H16.3333C16.7015 6.66699 17 6.96546 17 7.33365V15.0003H24.6667C25.0349 15.0003 25.3333 15.2988 25.3333 15.667Z"
															fill="currentColor"></path>
													</svg>
												</div>
											</div>
										</div>
										<div
											style="height: 0px"
											class="faq5_answer">
											<div class="max-width-extra-large">
												<div class="text-rich-text-produto-accordion w-richtext">
													{{ item.content }}
												</div>
											</div>
											<div class="spacer-small"></div>
										</div>
									</div>
								{%- endfor -%}
							</div>
						{%- endif -%}
					</div>
				</div>
			</div>
		</header>

		{% render 'produto-infos', product: product %}
		{% render 'produtos-tabela', product: product %}

		<!-- Related Products Section -->
		{%- if product.collections.first -%}
			{% render 'grid-produtos-relacionados', product: product %}
			<div class="spacer-xlarge"></div>
		{%- endif -%}
	</main>

	{%- render 'footer' -%}
</div>

<script
	src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=687b9decde4053855982b5b1"
	type="text/javascript"
	integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
	crossorigin="anonymous"
	defer></script>
<script
	src="{{ 'webflow.js' | asset_url }}"
	type="text/javascript"
	defer></script>
<script>
	// Function to add product to cart and open sidebar
	function addToCartAndOpenSidebar() {
		const form = document.querySelector('.product-header7_default-state');
		const formData = new FormData(form);

		// Show loading state
		const button = event.target;
		const originalText = button.textContent;
		button.textContent = 'Adicionando...';
		button.disabled = true;

		fetch('/cart/add.js', {
			method: 'POST',
			body: formData,
		})
			.then(response => response.json())
			.then(data => {
				if (data.status) {
					// Error occurred
					alert('Error adding product to cart: ' + data.description);
				} else {
					// Success - update cart count and open sidebar
					updateCartCount();
					if (typeof window.openSidebarCart === 'function') {
						window.openSidebarCart();
					}
				}
			})
			.catch(error => {
				console.error('Error:', error);
				alert('Error adding product to cart');
			})
			.finally(() => {
				// Reset button state
				button.textContent = originalText;
				button.disabled = false;
			});
	}

	// Function to add specific product to cart by variant ID
	function addRelatedProductToCart(variantId, quantity = 1) {
		// Show loading state
		const button = event.target;
		const originalText = button.textContent;
		button.textContent = 'Adicionando...';
		button.disabled = true;

		const formData = new FormData();
		formData.append('id', variantId);
		formData.append('quantity', quantity);

		fetch('/cart/add.js', {
			method: 'POST',
			body: formData,
		})
			.then(response => response.json())
			.then(data => {
				if (data.status) {
					// Error occurred
					alert('Error adding product to cart: ' + data.description);
				} else {
					// Success - update cart count and open sidebar
					updateCartCount();
					if (typeof window.openSidebarCart === 'function') {
						window.openSidebarCart();
					}
				}
			})
			.catch(error => {
				console.error('Error:', error);
				alert('Error adding product to cart');
			})
			.finally(() => {
				// Reset button state
				button.textContent = originalText;
				button.disabled = false;
			});
	}

	// Function to update cart count and sidebar
	function updateCartCount() {
		fetch('/cart.js')
			.then(response => response.json())
			.then(cart => {
				console.log('Cart updated:', cart);

				const cartCountElements = document.querySelectorAll('.cart-quantity-text');
				cartCountElements.forEach(element => {
					element.textContent = cart.item_count;
				});

				// Update sidebar cart if it exists with a small delay to ensure DOM is ready
				if (typeof window.updateCartDisplay === 'function') {
					setTimeout(() => {
						window.updateCartDisplay(cart);
					}, 100);
				}
			})
			.catch(error => {
				console.error('Error updating cart count:', error);
			});
	}
</script>
